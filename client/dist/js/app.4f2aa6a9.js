(function(t){function e(e){for(var n,s,i=e[0],u=e[1],c=e[2],f=0,d=[];f<i.length;f++)s=i[f],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,i=1;i<r.length;i++){var u=r[i];0!==a[u]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},a={app:0},o=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var l=u;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"02ce":function(t,e,r){},"034f":function(t,e,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},"041b":function(t,e,r){"use strict";var n=r("47b3"),a=r.n(n);a.a},1152:function(t,e,r){t.exports=r.p+"img/bulb1.740754c2.jpg"},"1cd5":function(t,e,r){},"2fe3":function(t,e,r){"use strict";var n=r("02ce"),a=r.n(n);a.a},3020:function(t,e,r){"use strict";var n=r("9372"),a=r.n(n);a.a},"3d24":function(t,e,r){"use strict";var n=r("1cd5"),a=r.n(n);a.a},"454d":function(t,e,r){t.exports=r.p+"img/bulb_on.adaad9e2.jpg"},4586:function(t,e,r){"use strict";var n=r("6e06"),a=r.n(n);a.a},"47b3":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n,a,o,s,i=r("a026"),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("Navigator"),r("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),r("div",{staticClass:"main-container"},[r("router-view")],1)],1)},c=[],l=r("5530"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navigation"},[n("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"dark"}},[n("b-navbar-brand",[n("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[n("img",{attrs:{src:r("9d64"),width:"40px"}}),n("strong",[t._v("SPS")])])],1),n("b-navbar-toggle",{attrs:{target:"navbar-toggle-collapse"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.expanded;return[n("b-icon",e?{attrs:{icon:"chevron-bar-up"}}:{attrs:{icon:"chevron-bar-down"}})]}}])}),n("b-collapse",{attrs:{id:"navbar-toggle-collapse","is-nav":""}},[n("b-navbar-nav",{staticClass:"ml-auto"},[t.isAuthenticated||t.authLoading?t._e():n("b-nav-item",[n("router-link",{staticClass:"nav-link",attrs:{to:"/login"}},[n("strong",[t._v("Login")])])],1),t.isAuthenticated||t.authLoading?t._e():n("b-nav-item",[n("router-link",{staticClass:"nav-link",attrs:{to:"/register"}},[n("strong",[t._v("Register")])])],1),t.isAuthenticated&&!t.authLoading?n("b-nav-item",[n("router-link",{staticClass:"nav-link",attrs:{to:"/dash"}},[n("strong",[t._v(t._s(t.getProfile.name))])])],1):t._e(),t.isAuthenticated||t.authLoading?n("b-nav-item",{on:{click:t.logout}},[n("span",{staticClass:"nav-link"},[n("strong",[t._v("Logout")])])]):t._e()],1)],1)],1)],1)},d=[],p=r("2f62"),m="AUTH_REQUEST",v="AUTH_SUCCESS",b="AUTH_ERROR",h="AUTH_LOGOUT",g={name:"Navigator",computed:Object(l["a"])({},Object(p["b"])(["getProfile","isAuthenticated"]),{},Object(p["c"])({authLoading:function(t){return"loading"===t.auth.status}})),methods:{logout:function(){var t=this;this.$store.dispatch(h).then((function(){return t.$router.push("/login").catch(console.error)}))}}},_=g,k=(r("4586"),r("2877")),j=Object(k["a"])(_,f,d,!1,null,"7a6eb7dd",null),w=j.exports,x=r("9062"),O=r.n(x),C=(r("e40d"),{name:"App",components:{Navigator:w,Loading:O.a},data:function(){return{}},computed:Object(l["a"])({},Object(p["b"])(["isLoading"])),created:function(){}}),y=C,S=(r("034f"),Object(k["a"])(y,u,c,!1,null,null,null)),E=S.exports,L=r("8c4f"),P=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"hello"},[r("h1",[t._v(t._s(t.msg))]),t._m(0),r("h3",[t._v("Installed CLI Plugins")]),t._m(1),r("h3",[t._v("Essential Links")]),t._m(2),r("h3",[t._v("Ecosystem")]),t._m(3)])},A=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",[t._v(" For a guide and recipes on how to configure / customize this project,"),r("br"),t._v(" check out the "),r("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-cli documentation")]),t._v(". ")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[t._v("babel")])]),r("li",[r("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[t._v("eslint")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[r("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Core Docs")])]),r("li",[r("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Forum")])]),r("li",[r("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Community Chat")])]),r("li",[r("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[t._v("Twitter")])]),r("li",[r("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("News")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[r("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-router")])]),r("li",[r("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vuex")])]),r("li",[r("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[t._v("vue-devtools")])]),r("li",[r("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-loader")])]),r("li",[r("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[t._v("awesome-vue")])])])}],R={name:"HelloWorld",props:{msg:String}},$=R,U=(r("ed0c"),Object(k["a"])($,P,A,!1,null,"87f44dfc",null)),T=U.exports,I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"login-form"}},[t._m(0),r("b-form",{staticClass:"login",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[r("div",{staticClass:"form-input"},[r("label",{attrs:{for:"email"}},[t._v("E-mail:")]),r("b-input",{staticClass:"text-input",attrs:{id:"email",type:"email",name:"email",placeholder:"example@example.net"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),r("div",{staticClass:"form-input"},[r("label",{attrs:{for:"password"}},[t._v("Password:")]),r("b-input",{staticClass:"text-input",attrs:{id:"password",type:"password",name:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),r("div",{staticClass:"form-input"},[r("b-alert",{attrs:{variant:"danger"},model:{value:t.error,callback:function(e){t.error=e},expression:"error"}},[t._v(" "+t._s(t.errMsg)+" ")])],1),r("div",{staticClass:"form-input"},[r("b-button",{staticClass:"submit-btn",attrs:{type:"submit"}},[t._v(" Submit ")])],1)])],1)},N=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("h1",{attrs:{id:"title"}},[r("b",[t._v("Welcome to the Login Page!")])])}],D={name:"Login",data:function(){return{email:"",password:"",error:!1,errMsg:""}},methods:{login:function(){var t=this;this.$store.dispatch(m,{email:this.email,password:this.password}).then((function(){t.$router.push("/dash")})).catch((function(e){t.error=!0,t.errMsg=e.response.data.error}))}}},M=D,H=(r("041b"),Object(k["a"])(M,I,N,!1,null,"0a0c756a",null)),q=H.exports,z=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("h1",[t._v("Welcome to the dashboard, "+t._s(t.getProfile.name)+"!")]),t._l(t.sockets,(function(e){return r("Socket",t._b({key:e.id,attrs:{title:e.name,description:e.description,state:!!e.switch_state},on:{put:t.put}},"Socket",e,!1))}))],2)},G=[],W=(r("7db0"),r("96cf"),r("1da1")),F="USER_REQUEST",B="USER_SUCCESS",J="USER_ERROR",Q=(r("d3b7"),r("ade3")),Y={token:localStorage.getItem("user-token")||"",status:""},K={isAuthenticated:function(t){return!!t.token},authStatus:function(t){return t.status}},V=(n={},Object(Q["a"])(n,m,(function(t,e){var r=t.commit;return new Promise((function(t,n){r(m),i["default"].prototype.axios.post("/auth/login",e).then((function(e){var n=e.data.token;localStorage.setItem("user-token",n),r(v,e),t(e)})).catch((function(t){r(b,t),localStorage.removeItem("user-token"),n(t)}))}))})),Object(Q["a"])(n,h,(function(t){var e=t.commit;return new Promise((function(t){e(h),delete i["default"].prototype.axios.defaults.headers.common["Authorization"],localStorage.removeItem("user-token"),t()}))})),n),X=(a={},Object(Q["a"])(a,m,(function(t){t.status="loading"})),Object(Q["a"])(a,v,(function(t,e){t.status="success",t.token=e})),Object(Q["a"])(a,b,(function(t){t.status="error"})),Object(Q["a"])(a,h,(function(t){t.token=""})),a),Z={getters:K,actions:V,mutations:X,state:Y},tt=(r("b0c0"),r("bc3a")),et=r.n(tt),rt={status:"",profile:{}},nt={getProfile:function(t){return t.profile},isProfileLoaded:function(t){return!!t.profile.name}},at=Object(Q["a"])({},F,(function(t){var e=t.commit,r=t.dispatch;return new Promise((function(t,n){e(F),et.a.get("/auth/user").then((function(r){e(B,r),t()})).catch((function(){e(J),r(h),n()}))}))})),ot=(o={},Object(Q["a"])(o,F,(function(t){t.status="loading"})),Object(Q["a"])(o,B,(function(t,e){t.status="success",t.profile=e.data})),Object(Q["a"])(o,J,(function(t){t.status="error"})),Object(Q["a"])(o,h,(function(t){t.profile={}})),o),st={state:rt,getters:nt,actions:at,mutations:ot},it="START_LOADING",ut="FINISH_LOADING",ct={refCount:0,isLoading:!1},lt={refCount:function(t){return t.refCount},isLoading:function(t){return t.isLoading}},ft=(s={},Object(Q["a"])(s,it,(function(t){t.isLoading=!0,t.refCount++})),Object(Q["a"])(s,ut,(function(t){t.refCount--,t.isLoading=t.refCount>0})),s),dt={state:ct,getters:lt,mutations:ft};i["default"].use(p["a"]);var pt=new p["a"].Store({modules:{auth:Z,user:st,loading:dt}}),mt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"socket-card"}},[r("b-card",{staticClass:"mb-2",staticStyle:{"max-width":"20rem"},attrs:{title:t.title,"img-src":t.image,"img-alt":"Image","img-top":"",tag:"article"}},[r("b-card-text",[t._v(" "+t._s(t.description)+" ")]),r("b-input-group",{attrs:{id:"switch",size:"lg"}},[r("b-input-group-prepend",{attrs:{"is-text":""}},[r("b-form-checkbox",{staticClass:"mr-n2",attrs:{switch:"",checked:t.state},on:{change:t.put}})],1)],1)],1)],1)},vt=[],bt=(r("a9e3"),{name:"Socket",props:{id:{type:Number,required:!0,default:0},title:{type:String,required:!0,default:""},description:{type:String,required:!0,default:""},state:{type:Boolean,required:!0,default:!1}},computed:{image:function(){var t=this.state?"bulb_on":"bulb";return r("b5a1")("./".concat(t,".jpg"))}},methods:{put:function(t){this.$emit("put",this.id,t)}}}),ht=bt,gt=(r("3d24"),Object(k["a"])(ht,mt,vt,!1,null,"59992e67",null)),_t=gt.exports,kt={name:"Dashboard",components:{Socket:_t},data:function(){return{sockets:[]}},computed:Object(l["a"])({},Object(p["b"])(["getProfile"])),created:function(){var t=this;this.axios.get("/sockets/list").then((function(e){t.sockets=e.data})).catch(console.error)},methods:{put:function(t,e){var r=this;return Object(W["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.axios.put("/sockets/".concat(t),{state:+e});case 2:r.sockets.find((function(e){return e.id===t})).state=e;case 3:case"end":return n.stop()}}),n)})))()}},beforeRouteEnter:function(t,e,r){pt.getters.isAuthenticated&&pt.dispatch(F).then((function(){r()})).catch((function(){Ut.push("/login").catch(console.error)}))}},jt=kt,wt=(r("2fe3"),Object(k["a"])(jt,z,G,!1,null,null,null)),xt=wt.exports,Ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"register-form"}},[t._m(0),r("b-form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[r("div",{staticClass:"form-input"},[r("label",{attrs:{for:"username"}},[t._v("Username:")]),r("b-input",{staticClass:"text-input",attrs:{id:"username",type:"text",name:"username",state:t.validation,placeholder:"George"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),r("b-form-invalid-feedback",{staticClass:"form-feedback",attrs:{state:t.validation}},[t._v(" Your username should be at least 3 characters long. ")]),r("b-form-valid-feedback",{staticClass:"form-feedback",attrs:{state:t.validation}},[t._v(" Looks Good. ")])],1),r("div",{staticClass:"form-input"},[r("label",{attrs:{for:"email"}},[t._v("E-mail:")]),r("b-input",{staticClass:"text-input",attrs:{id:"email",type:"email",name:"email",placeholder:"example@example.net"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),r("div",{staticClass:"form-input"},[r("label",{attrs:{for:"password"}},[t._v("Password:")]),r("b-input",{staticClass:"text-input",attrs:{id:"password",type:"password",name:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),r("b-form-text",{attrs:{id:"password-help-block"}},[t._v(" Your password must be 6-20 characters long, contain letters and numbers, and must not contain spaces, special characters, or emoji. ")])],1),r("div",{staticClass:"form-input"},t._l(t.errors,(function(e){return r("b-alert",{key:e,attrs:{variant:"danger"},model:{value:t.error,callback:function(e){t.error=e},expression:"error"}},[t._v(" "+t._s(e)+" ")])})),1),r("div",{staticClass:"form-input"},[r("b-button",{staticClass:"submit-btn",attrs:{type:"submit"}},[t._v(" Submit ")])],1)])],1)},Ct=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("h1",[r("b",[t._v("Welcome to the Register Page!")])])}],yt=(r("99af"),r("07ac"),r("2909")),St={name:"Register",data:function(){return{name:"",email:"",password:"",error:!1,errors:[]}},computed:{validation:function(){return this.name.length>=3}},methods:{register:function(){var t=this;this.axios.post("/auth/register",{name:this.name,email:this.email,password:this.password}).then((function(){t.$router.push("/login")})).catch((function(e){var r;t.error=!0;var n=Object.values(e.response.data.errors);t.errors=(r=Array.prototype).concat.apply(r,Object(yt["a"])(n))}))}}},Et=St,Lt=(r("3020"),Object(k["a"])(Et,Ot,Ct,!1,null,"4732b4fa",null)),Pt=Lt.exports,At=function(t,e,r){pt.getters.isAuthenticated?r("/"):r()},Rt=function(t,e,r){pt.getters.isAuthenticated?r():r("/login")},$t=new L["a"]({mode:"history",routes:[{path:"/",name:"HelloWorld",component:T},{path:"/login",name:"Login",component:q,meta:{auth:!1},beforeEnter:At},{path:"/register",name:"Register",component:Pt,meta:{auth:!1},beforeEnter:At},{path:"/dash",name:"DashBoard",component:xt,meta:{auth:!0},beforeEnter:Rt}]}),Ut=$t;function Tt(t){t.interceptors.request.use((function(t){return pt.commit(it),t}),(function(t){return pt.commit(ut),Promise.reject(t)})),t.interceptors.response.use((function(t){return pt.commit(ut),t}),(function(t){return pt.commit(ut),Promise.reject(t)}))}function It(t){t.interceptors.request.use((function(t){var e=localStorage.getItem("user-token");return e&&(t.headers.common["Authorization"]="Bearer "+e),t}),(function(t){return Promise.reject(t)})),t.interceptors.response.use((function(t){var e=t.headers.authorization;return e&&localStorage.setItem("user-token",e.substr(7)),401===t.status&&pt.dispatch(h),t}),(function(t){return t.response&&t.response.data?Promise.reject(t.response.data):Promise.reject(t.message)}))}var Nt=r("a7fe"),Dt=r.n(Nt),Mt=r("5f5b"),Ht=r("b1e0");r("f9e3"),r("2dd8");i["default"].config.productionTip=!1,et.a.defaults.baseURL="http://localhost:8000/api",i["default"].use(Mt["a"]),i["default"].use(Ht["a"]),i["default"].use(L["a"]),i["default"].use(Dt.a,et.a),It(et.a),Tt(et.a),new i["default"]({render:function(t){return t(E)},router:Ut,store:pt}).$mount("#app")},"6e06":function(t,e,r){},"7ee0":function(t,e,r){},"85ec":function(t,e,r){},9372:function(t,e,r){},"9d64":function(t,e,r){t.exports=r.p+"img/logo.82b9c7a5.png"},b5a1:function(t,e,r){var n={"./bulb.jpg":"c23e","./bulb1.jpg":"1152","./bulb_on.jpg":"454d"};function a(t){var e=o(t);return r(e)}function o(t){if(!r.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}a.keys=function(){return Object.keys(n)},a.resolve=o,t.exports=a,a.id="b5a1"},c23e:function(t,e,r){t.exports=r.p+"img/bulb.e7f5043d.jpg"},ed0c:function(t,e,r){"use strict";var n=r("7ee0"),a=r.n(n);a.a}});
//# sourceMappingURL=app.4f2aa6a9.js.map